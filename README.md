# SignalScope Platform

SignalScope is a full-stack, multi-tenant investigation platform with a real daily remote-viewing engine.
Remote-viewing targets are generated by OpenAI on the day, hidden until the next day, then scored with AI for win/loss records.

## Stack

- Frontend: static HTML/CSS/JS in `/public`
- Backend: Node HTTP server in `/server.js`
- Persistence: JSON datastore in `DATA_DIR/store.json`
- Runtime deps: none (Node 18+)

## Core Features

- User auth: register, login, logout, bearer sessions
- Multi-tenant communities with creation from UI
- Feed system: posts, comments, upvotes, filtering/sorting
- Caseboard: create cases, toggle tasks
- Daily remote viewing:
  - Real AI target generation (`OPENAI_IMAGE_MODEL`, default `gpt-image-1`)
  - Day-of generation with delayed reveal next day (UTC day boundary)
  - Prediction submission per user per day
  - AI win/loss scoring (`OPENAI_JUDGE_MODEL`)
  - Personal record + leaderboard

## No Template Mock Data

- Legacy template seed data is automatically purged on startup.
- New stores initialize with an empty operational tenant and no fake posts/cases/users.
- All remote-viewing targets and scoring are produced by real OpenAI API calls.

## Required Environment Variables

- `OPENAI_API_KEY` (required for remote-viewing generation + scoring)

## Optional Environment Variables

- `HOST` (default `0.0.0.0`)
- `PORT` (default `3000`)
- `DATA_DIR` (default `./data`)
- `OPENAI_BASE_URL` (default `https://api.openai.com/v1`)
- `OPENAI_IMAGE_MODEL` (default `gpt-image-1`)
- `OPENAI_TEXT_MODEL` (default `gpt-4o-mini`)
- `OPENAI_JUDGE_MODEL` (default `gpt-4o-mini`)

## Run Locally

```bash
OPENAI_API_KEY=your_key_here npm start
```

With custom host/port/data dir:

```bash
OPENAI_API_KEY=your_key_here HOST=127.0.0.1 PORT=3001 DATA_DIR=/absolute/path/to/data npm start
```

## Railway Deployment

1. Push to GitHub.
2. Create a Railway project from this repo.
3. Add a Railway Volume and mount it at `/data`.
4. Set env vars:
   - `DATA_DIR=/data`
   - `OPENAI_API_KEY=...`
5. Deploy.

## API Endpoints

- `GET /api/health`
- `POST /api/auth/register`
- `POST /api/auth/login`
- `POST /api/auth/logout`
- `GET /api/auth/me`
- `GET /api/tenants`
- `POST /api/tenants`
- `GET /api/tenants/:id`
- `GET /api/tenants/:id/posts?filter=all|video|podcast|meme|brief&sort=hot|new|clues`
- `POST /api/tenants/:id/posts`
- `POST /api/posts/:id/upvote`
- `GET /api/posts/:id/comments`
- `POST /api/posts/:id/comments`
- `GET /api/tenants/:id/cases`
- `POST /api/tenants/:id/cases`
- `PATCH /api/tasks/:id`
- `GET /api/remote-viewing/daily`
- `POST /api/remote-viewing/predictions`
- `GET /api/remote-viewing/rounds/:id/image`
